<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title></title>
  <link rel="stylesheet" href="assets/css.css">
</head>

<body>
  <div class="prefix" id='prefix'>
    <div class="prefixItemHeader">Light Web</div>
    <div class="prefixItemTips">Root 需要以 index 或者 index.html 结尾</div>
    <div class="prefixItem">
      <div class="prefixItemText">Root</div>
      <input class="prefixInput" type="text" value="http://localhost:8888/index" id='inputURL' />
      <!-- <input class="prefixInput" type="text" value="file:///Users/songhang/webApp/web_local/index.html" id='inputURL' /> -->
    </div>
    <div class="prefixItem">
      <div class="prefixItemText">max-router</div>
      <input class="prefixInput" type="text" value="5" id='inputRouter' />
    </div>
    <div class="prefixItem" style="margin-top: 20px;">
      <button class="headerBtn" id='okBtn'>开始调试</button>
    </div>
  </div>
  <script src="assets/native.js"></script>
  <script>
    const main = () => {
      const inputURL = document.getElementById('inputURL')
      const inputRouter = document.getElementById('inputRouter')
      const okBtn = document.getElementById('okBtn')
      okBtn.addEventListener('click', () => {
        const url = inputURL.value
        const maxRouterNumber = Number(inputRouter.value)
        if (url.length > 0 && inputRouter.value.length > 0 && !isNaN(maxRouterNumber)) {
          if (url.endsWith('index') || url.endsWith('index.html')) {
            nativeEvent.sent(
              { name: 'createMainWindow', data: { url, maxRouterNumber } },
              (res) => { main(maxRouterNumber) }
            )
          }
        }
      })
    }
    main()
  </script>
</body>

</html>